# Users-Budgets Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏—Ö –±—é–¥–∂–µ—Ç–∞–º–∏ –≤ —Ä–∞–º–∫–∞—Ö —Å–∏—Å—Ç–µ–º—ã Smart Expenses.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞](#–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ-—Å–µ—Ä–≤–∏—Å–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é](#—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ-–ø–æ-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é)
- [–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#–∑–∞–ø—É—Å–∫-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞

`users-budgets-service` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞–º–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–æ–≤, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ REST API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Java 23** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Spring Boot 3.5.x** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
- **Spring Web** - REST API
- **Spring Data JPA** - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **Spring Security** - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Hibernate ORM** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Maven** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- **Lombok** - –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è boilerplate-–∫–æ–¥–∞

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/main/java/com/smart/expense/usersbudgets/
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ controller/       # REST –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îú‚îÄ‚îÄ dto/             # Data Transfer Objects
‚îú‚îÄ‚îÄ entity/          # JPA —Å—É—â–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ exception/       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
‚îú‚îÄ‚îÄ repository/      # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îî‚îÄ‚îÄ service/         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
```

### –û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤

#### üóÉ Entity (–°—É—â–Ω–æ—Å—Ç–∏)

**User.java**
```java
@Entity
@Table(name = "users")
public class User {
    private UUID id;           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
    private String email;      // Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
    private String name;       // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    private String password;   // –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
    private List<Budget> budgets; // –°–ø–∏—Å–æ–∫ –±—é–¥–∂–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
}
```

**Budget.java**
```java
@Entity
@Table(name = "budgets")
public class Budget {
    private UUID id;           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
    private User user;         // –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
    private String category;   // –ö–∞—Ç–µ–≥–æ—Ä–∏—è –±—é–¥–∂–µ—Ç–∞
    private BigDecimal amount; // –°—É–º–º–∞ –±—é–¥–∂–µ—Ç–∞
    private String month;      // –ú–µ—Å—è—Ü –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM
}
```

#### üéÆ Controller (–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)

**UserController.java**
- `POST /users` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /users/{id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
- `GET /users` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**PublicBudgetController.java**
- `POST /budgets/{userId}` - —Å–æ–∑–¥–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /budgets/{userId}?month=YYYY-MM` - –ø–æ–ª—É—á–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –º–µ—Å—è—Ü

**InternalBudgetController.java**
- `GET /internal/budgets-by-user/{userId}?month=YYYY-MM` - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π API –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

#### üîß Service (–°–µ—Ä–≤–∏—Å—ã)

**UserService.java**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ email/ID

**BudgetService.java**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞–º–∏
- –ü–æ–∏—Å–∫ –±—é–¥–∂–µ—Ç–æ–≤ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –º–µ—Å—è—Ü—É
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### üóÑ Repository (–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)

**UserRepository.java**
- `findById(UUID id)` - –ø–æ–∏—Å–∫ –ø–æ ID
- `findByEmail(String email)` - –ø–æ–∏—Å–∫ –ø–æ email

**BudgetRepository.java**
- `findByUserAndMonth(User user, String month)` - –ø–æ–∏—Å–∫ –±—é–¥–∂–µ—Ç–æ–≤ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –º–µ—Å—è—Ü—É

#### üì¶ DTO (Data Transfer Objects)

**UserDTO.java**
```json
{
  "id": "uuid",
  "email": "user@example.com",
  "name": "User Name",
  "password": "password"
}
```

**BudgetDTO.java**
```json
{
  "id": "uuid",
  "userId": "uuid",
  "category": "Food",
  "amount": 300.50,
  "month": "2025-09"
}
```

## üîå API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### Users API

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
POST /users
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john@example.com",
  "password": "securePassword123"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "123e4567-e89b-12d3-a456-426614174000",
  "email": "john@example.com",
  "name": "John Doe"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
GET /users/{userId}
Authorization: Bearer {jwt_token}
```

### Budgets API

#### –°–æ–∑–¥–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞
```http
POST /budgets/{userId}
Authorization: Bearer {jwt_token}
Content-Type: application/json

{
  "category": "Food",
  "amount": 300.50,
  "month": "2025-09"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–æ–≤ –∑–∞ –º–µ—Å—è—Ü
```http
GET /budgets/{userId}?month=2025-09
Authorization: Bearer {jwt_token}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "budgets": [
    {
      "id": "123e4567-e89b-12d3-a456-426614174001",
      "userId": "123e4567-e89b-12d3-a456-426614174000",
      "category": "Food",
      "amount": 300.50,
      "month": "2025-09"
    }
  ]
}
```

## üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   mvn spring-boot:run
   ```

2. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ Postman –∫–æ–ª–ª–µ–∫—Ü–∏—é:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Postman
   - Import ‚Üí File ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ `usersbudgets.postman_collection.json`

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –í Postman –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Environments
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ "Users-Budgets"
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
     - `baseUrl`: `http://localhost:8082`
     - `jwtToken`: `YOUR_JWT_TOKEN_HERE` (–ø–æ–∫–∞ –æ—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å)
     - `userId`: `YOUR_USER_ID_HERE` (–±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
     - `budgetId`: `YOUR_BUDGET_ID_HERE` (–±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ü–æ—à–∞–≥–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø—Ä–æ—Å **"1. Create User"** –∏–∑ –ø–∞–ø–∫–∏ **Test Scenarios**
2. –ù–∞–∂–º–∏—Ç–µ **Send**
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 201 Created
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `id` –∏–∑ –æ—Ç–≤–µ—Ç–∞** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `userId`

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "id": "123e4567-e89b-12d3-a456-426614174000",
  "email": "test@example.com",
  "name": "Test User"
}
```

#### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–µ–Ω JWT —Ç–æ–∫–µ–Ω –æ—Ç auth-service. 

**–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. –û—Ç–∫–ª—é—á–∏—Ç–µ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ `SecurityConfig.java`:
   ```java
   .authorizeHttpRequests(authorize -> authorize.anyRequest().permitAll())
   ```
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `jwtToken` = `"test"` (–ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)

#### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–æ–≤

1. **–°–æ–∑–¥–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞:**
   - –í—ã–±–µ—Ä–∏—Ç–µ **"2. Create Multiple Budgets"**
   - –ù–∞–∂–º–∏—Ç–µ **Send**
   - **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 201 Created

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–æ–≤:**
   - –í—ã–±–µ—Ä–∏—Ç–µ **"3. Get All Budgets for Month"**
   - –ù–∞–∂–º–∏—Ç–µ **Send**
   - **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 200 OK —Å —Å–ø–∏—Å–∫–æ–º –±—é–¥–∂–µ—Ç–æ–≤

#### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º:**
   - –í—ã–±–µ—Ä–∏—Ç–µ **"4. Test Security - Access Another User's Data"**
   - –ù–∞–∂–º–∏—Ç–µ **Send**
   - **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 403 Forbidden –∏–ª–∏ SecurityException

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

#### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

1. **–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Invalid User Data"** –∏–∑ –ø–∞–ø–∫–∏ **Error Testing**
   - –ù–∞–∂–º–∏—Ç–µ **Send**
   - **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 400 Bad Request

2. **–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—é–¥–∂–µ—Ç–∞:**
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Invalid Budget Data"**
   - –ù–∞–∂–º–∏—Ç–µ **Send**
   - **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 400 Bad Request

3. **–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:**
   - –í—ã–±–µ—Ä–∏—Ç–µ **"Unauthorized Request"**
   - –ù–∞–∂–º–∏—Ç–µ **Send**
   - **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 401 Unauthorized

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```json
{
  "name": "Alice Johnson",
  "email": "alice@example.com",
  "password": "password123"
}
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–æ–≤
```json
{
  "category": "Groceries",
  "amount": 500.00,
  "month": "2025-09"
}
```

```json
{
  "category": "Transport",
  "amount": 150.00,
  "month": "2025-09"
}
```

```json
{
  "category": "Entertainment",
  "amount": 200.00,
  "month": "2025-09"
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

1. ‚úÖ –°–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. ‚úÖ –ù–µ—Å–∫–æ–ª—å–∫–æ –±—é–¥–∂–µ—Ç–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏
4. ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫—É –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
5. ‚úÖ –ó–∞—â–∏—Ç—É –æ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Java 23+
- Maven 3.6+
- PostgreSQL 12+

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
   ```sql
   CREATE DATABASE usersbudgets;
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   ```sql
   CREATE USER postgres WITH PASSWORD 'postgres';
   GRANT ALL PRIVILEGES ON DATABASE usersbudgets TO postgres;
   ```

### –ó–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd usersbudgets

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è
mvn clean compile

# –ó–∞–ø—É—Å–∫
mvn spring-boot:run
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8082`

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### application.yml

```yaml
server:
  port: 8082

spring:
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${JWT_ISSUER_URI:http://localhost:8080/auth/realms/smart-expenses}
          audience: ${JWT_AUDIENCE:smart-expenses}

  datasource:
    url: jdbc:postgresql://localhost:5432/usersbudgets
    username: postgres
    password: postgres
    
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `JWT_ISSUER_URI` - URL —Å–µ—Ä–≤–∏—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `JWT_AUDIENCE` - –∞—É–¥–∏—Ç–æ—Ä–∏—è JWT —Ç–æ–∫–µ–Ω–æ–≤
- `SPRING_DATASOURCE_URL` - URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `SPRING_DATASOURCE_USERNAME` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
- `SPRING_DATASOURCE_PASSWORD` - –ø–∞—Ä–æ–ª—å –ë–î

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –≤—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –≤–∞–ª–∏–¥–Ω—ã–π JWT —Ç–æ–∫–µ–Ω
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π** - –ø–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (BCrypt)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Logback –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ `application.yml`:

```yaml
logging:
  level:
    com.smart.expense.usersbudgets: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
```

## ü§ù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

–°–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å:

- **auth-service** - –ø–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–æ–≤
- **transactions-service** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—é–¥–∂–µ—Ç–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **frontend** - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –∏ –±—é–¥–∂–µ—Ç–∞—Ö

